<header
  id="header"
  class="bg-[#fff6e7] p-4 shadow-md relative flex items-center justify-between min-h-16"
>
  <!-- Contenedor que solo blureará en móvil -->
  <div id="blur-container" class="flex items-center gap-4 md:filter-none">
    <h1 class="text-lg font-semibold">MIS XV AÑOS</h1>
  </div>

  <!-- Botón hamburguesa SOLO en móvil -->
  <button
    id="menu-toggle"
    class="z-50 flex flex-col justify-between w-8 h-6 md:hidden"
    aria-label="Toggle Menu"
  >
    <span
      class="block h-[3px] bg-black w-full rounded transition-all duration-300 origin-left"
    ></span>
    <span
      class="block h-[3px] bg-black w-full rounded transition-all duration-300 origin-left"
    ></span>
    <span
      class="block h-[3px] bg-black w-full rounded transition-all duration-300 origin-left"
    ></span>
  </button>
  <!-- Menú escritorio -->
  <ul
    class="hidden md:flex items-center gap-6 justify-end [&>li]:font-semibold [&>li]:hover:text-green-800"
  >
    <li><a href="">MIS XV</a></li>
    <li><a href="">CUENTA REGRESIVA</a></li>
    <li><a href="">MI CANCIÓN</a></li>
    <li><a href="">MI HISTORIA</a></li>
    <li><a href="">PADRES Y PADRINOS</a></li>
    <li><a href="">LUGAR Y FECHA</a></li>
    <li><a href="">CONFIRMAR ASISTENCIA</a></li>
    <li><a href="">GALERIA DE FOTOS</a></li>
  </ul>
</header>

<!-- Overlay SOLO en móvil -->
<div
  id="overlay"
  class="fixed inset-0 hidden z-30 md:hidden cursor-default transition-all duration-300 opacity-0 pointer-events-none"
  style="background-color: transparent;"
>
</div>

<!-- Menú -->
<ul
  id="mobile-menu"
  class="fixed top-0 invisible right-0 h-full w-2/3 max-w-xs bg-[#fff6e7] p-6 space-y-4 transform translate-x-full transition-transform duration-300 z-40 md:hidden md:translate-x-0 md:gap-6 md:items-center md:space-y-0 md:p-0"
>
  <li><a href="">MIS XV</a></li>
  <li><a href="">CUENTA REGRESIVA</a></li>
  <li><a href="">MI CANCIÓN</a></li>
  <li><a href="">MI HISTORIA</a></li>
  <li><a href="">PADRES Y PADRINOS</a></li>
  <li><a href="">LUGAR Y FECHA</a></li>
  <li><a href="">CONFIRMAR ASISTENCIA</a></li>
  <li><a href="">GALERIA DE FOTOS</a></li>
</ul>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const toggle = document.getElementById("menu-toggle");
    const menu = document.getElementById("mobile-menu")!;
    const blurContainer = document.getElementById("blur-container")!;
    const overlay = document.getElementById("overlay")!;

    if (!toggle || !menu || !blurContainer || !overlay) return;

    const bars = toggle.querySelectorAll("span");

    menu.classList.remove("invisible");

    function closeMenu() {
      menu.classList.add("translate-x-full");
      blurContainer.classList.remove("blur-sm");

      bars[0].classList.remove("rotate-45");
      bars[1].classList.remove("opacity-0");
      bars[2].classList.remove("-rotate-45");

      overlay.classList.add("hidden");
    }

    toggle.addEventListener("click", () => {
      const isMenuOpen = !menu.classList.contains("translate-x-full");

      if (isMenuOpen) {
        closeMenu();
      } else {
        menu.classList.remove("translate-x-full");

        // Aplica transición suave al blur
        blurContainer.classList.add(
          "transition-all",
          "duration-300",
          "blur-sm"
        );

        // Muestra el overlay con animación
        overlay.classList.remove("hidden", "opacity-0", "pointer-events-none");
        overlay.classList.add(
          "opacity-100",
          "pointer-events-auto",
          "transition-all",
          "duration-300"
        );

        bars[0].classList.add("rotate-45");
        bars[1].classList.add("opacity-0");
        bars[2].classList.add("-rotate-45");
      }
    });

    overlay.addEventListener("click", closeMenu);
  });
</script>
